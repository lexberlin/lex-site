---
/**
 * * These are alternating side cards with titles, text, and images
 * Recommend using 2 or 3 cards in a row
 */

import { Image } from "astro:assets";
import { Icon } from "astro-icon/components";

// components
import Button from "@components/Button/Button.astro";

// utils
import { getLocaleFromUrl } from "@js/localeUtils";

interface Props {
	title?: string; // larger title
	href?: string; // link to learn more
	image: string | ImageMetadata; // an imported image
    alt: string;
	imageSide: "left" | "right";
	idx: number; // determines which "stellar/blob" icon svg to use. There are 4 options (0-3)
}

const { image, title, href, idx, imageSide, alt } = Astro.props as Props;

const currLocale = getLocaleFromUrl(Astro.url);
---

<div class="mx-auto grid gap-8 rounded-xl md:grid-cols-2 md:gap-12 lg:gap-20">
	<!-- text -->
	<div class=`${imageSide === "left" ? "md:order-last": ""} col-span-1`>
		{title && (
			<h2 class="h2 mt-6 font-display text-5xl text-rhino-700">{title}</h2>
		)}
		<div class="mt-4 markdown-content text-lg text-rhino-950"><slot/></div>
		{href && (
			<div class="z-20 mt-4 flex">
				<Button variant="ghost" href={href} arrow="right">
					Learn more <span class="sr-only">about {title}</span>
				</Button>
			</div>
		)}
	</div>

	<!-- image -->
	<div class="relative mx-auto max-w-4xl">
		<!-- background blob -->
        <Icon
				name={`stellar/blob-${idx % 4}`}
				class="text-golden-100 absolute top-0 left-0 h-auto w-[220%] -translate-x-1/4 -translate-y-[21%] md:-translate-x-1/3"
				aria-hidden="true"
			/>

        {/* TODO: fix this type issue */}
        {/* @ts-expect-error */}
		<Image
			class="relative rounded-xl border border-transparent object-cover"
			src={image}
			alt={alt}
		/>
        {/* end @ts-expect-error */}
	</div>
</div>